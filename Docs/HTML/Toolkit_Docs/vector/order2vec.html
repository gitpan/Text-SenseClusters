<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>order2vec.pl</title>
<link rev="made" href="mailto:jluttine@marimba.d.umn.edu" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#usage">USAGE</a></li>
	<li><a href="#input">INPUT</a></li>
	<ul>

		<li><a href="#required_arguments_">Required Arguments:</a></li>
		<ul>

			<li><a href="#sval2">SVAL2</a></li>
			<li><a href="#wordvec">WORDVEC</a></li>
			<li><a href="#feature_regex">FEATURE_REGEX</a></li>
		</ul>

		<li><a href="#optional_arguments_">Optional Arguments:</a></li>
		<ul>

			<li><a href="#binary">-binary</a></li>
			<li><a href="#dense">-dense</a></li>
			<li><a href="#rlabel_rlabelfile">-rlabel RLABELFILE</a></li>
			<li><a href="#rclass_rclassfile">-rclass RCLASSFILE</a></li>
			<li><a href="#showkey">-showkey</a></li>
		</ul>

		<li><a href="#other_options__">Other Options :</a></li>
		<ul>

			<li><a href="#format_form">-format FORM</a></li>
			<li><a href="#help">-help</a></li>
			<li><a href="#version">-version</a></li>
		</ul>

	</ul>

	<li><a href="#output">OUTPUT</a></li>
	<ul>

		<li><a href="#sample_sparse_output">Sample Sparse Output</a></li>
		<li><a href="#sample_dense_output">Sample Dense Output</a></li>
	</ul>

	<li><a href="#system_requirements">SYSTEM REQUIREMENTS</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>order2vec.pl</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>Creates second order context vectors by averaging word or feature vectors of 
the contextual features.</p>
<p>
</p>
<hr />
<h1><a name="usage">USAGE</a></h1>
<p>order2vec.pl [OPTIONS] SVAL2 WORDVEC FEATURE_REGEX</p>
<p>
</p>
<hr />
<h1><a name="input">INPUT</a></h1>
<p>
</p>
<h2><a name="required_arguments_">Required Arguments:</a></h2>
<p>
</p>
<h3><a name="sval2">SVAL2</a></h3>
<p>A tokenized, preprocessed and well formatted Senseval-2 instance file 
showing instances whose context vectors are to be generated.</p>
<p>order2vec creates a context vector for each instance in the given SVAL2 file 
by averaging the word or feature vectors of the features that appear in the 
context.</p>
<p>
</p>
<h3><a name="wordvec">WORDVEC</a></h3>
<p>Should be one of the following type of files:</p>
<ol>
<li></li>
A file containing word vectors as created by program wordvec.pl
<p></p>
<li></li>
A file containing feature vectors as created by order1vec.pl, using its
--transpose option.
<p></p></ol>
<p>Each line in WORDVEC should show a word or feature vector of the feature 
represented by the corresponding line in the FEATURE_REGEX file.</p>
<p>order2vec accepts WORDVEC in both sparse and dense formats. If WORDVEC is 
in dense format, switch --dense should be selected.</p>
<p>
</p>
<h3><a name="feature_regex">FEATURE_REGEX</a></h3>
<p>Should be one of the following type of files:</p>
<ol>
<li></li>
The output file generated by running nsp2regex.pl on the FEATURE file as 
generated by program wordvec.pl while creating the WORDVEC file.
<p></p>
<li></li>
The TEST_REGEX file created by order1vec.pl using its --testregex option, while 
creating the feature-by-context output file using the --transpose option.
<p></p></ol>
<p>Each line in FEATURE_REGEX file should show a regular expression for a feature 
whose feature vector appears on the corresponding line in the WORDVEC file. 
FEATURE_REGEX should be formatted like the output of the nsp2regex.pl program.</p>
<p>Sample FEATURE_REGEX files:</p>
<ol>
<li></li>
A file output by nsp2regex.pl when it is run on the file produced by --feats 
option of wordvec.pl:
<pre>
 /\s(&lt;[^&gt;]*&gt;)*details(&lt;[^&gt;]*&gt;)*\s/ @name = details
 /\s(&lt;[^&gt;]*&gt;)*weather(&lt;[^&gt;]*&gt;)*\s/ @name = weather
 /\s(&lt;[^&gt;]*&gt;)*test(&lt;[^&gt;]*&gt;)*\s/ @name = test
 /\s(&lt;[^&gt;]*&gt;)*cloth(&lt;[^&gt;]*&gt;)*\s/ @name = cloth
 /\s(&lt;[^&gt;]*&gt;)*health(&lt;[^&gt;]*&gt;)*\s/ @name = health
 /\s(&lt;[^&gt;]*&gt;)*art(&lt;[^&gt;]*&gt;)*\s/ @name = art</pre>
<p></p>
<li></li>
A TEST_REGEX file output by order1vec.pl using its --testregex option:
<pre>
 /\s(&lt;[^&gt;]*&gt;)*polygonal(&lt;[^&gt;]*&gt;)*\s/ @name = polygonal
 /\s(&lt;[^&gt;]*&gt;)*ectoderm(&lt;[^&gt;]*&gt;)*\s/ @name = ectoderm
 /\s(&lt;[^&gt;]*&gt;)*fluid(&lt;[^&gt;]*&gt;)*\s/ @name = fluid
 /\s(&lt;[^&gt;]*&gt;)*CEMx174(&lt;[^&gt;]*&gt;)*\s/ @name = CEMx174
 /\s(&lt;[^&gt;]*&gt;)*adjacent(&lt;[^&gt;]*&gt;)*\s/ @name = adjacent
 /\s(&lt;[^&gt;]*&gt;)*mutant(&lt;[^&gt;]*&gt;)*\s/ @name = mutant
 /\s(&lt;[^&gt;]*&gt;)*progenitor(&lt;[^&gt;]*&gt;)*\s/ @name = progenitor
 /\s(&lt;[^&gt;]*&gt;)*Ganglion(&lt;[^&gt;]*&gt;)*\s/ @name = Ganglion
 /\s(&lt;[^&gt;]*&gt;)*MLS(&lt;[^&gt;]*&gt;)*\s/ @name = MLS
 /\s(&lt;[^&gt;]*&gt;)*male(&lt;[^&gt;]*&gt;)*\s/ @name = male
 /\s(&lt;[^&gt;]*&gt;)*mother(&lt;[^&gt;]*&gt;)*\s/ @name = mother</pre>
<p></p></ol>
<p>
</p>
<h2><a name="optional_arguments_">Optional Arguments:</a></h2>
<p>
</p>
<h3><a name="binary">--binary</a></h3>
<p>Select this switch to create binary context vectors. Binary vectors are 
computed by taking the binary OR of the word vectors of features that are 
found in the context. By default, order2vec creates frequency score vectors 
that show arithmatic avearge of the word vectors of contextual features.</p>
<p>
</p>
<h3><a name="dense">--dense</a></h3>
<p>By default, word vectors in WORDVEC are assumed to be in sparse format. Also,
the context vectors displayed by order2vec are in sparse format.</p>
<p>Select --dense if the word vectors are in dense format. This will automatically
create output vectors in dense format as well.</p>
<p>****************     IMPORTANT NOTE    ************</p>
<p>Dense word vectors (when --dense is ON) should be formatted i.e. each entry
of WORDVEC should be represented using the same numeric format and should
occupy exactly same number of spaces. Use --format option to specify the
format of dense word vectors.</p>
<p>
</p>
<h3><a name="rlabel_rlabelfile">--rlabel RLABELFILE</a></h3>
<p>Creates a RLABELFILE containing row labels for Cluto's --rlabelfile option.
Each line in RLABELFILE shows an instance id of the instance whose context
vector appears on the corresponding line on STDOUT.</p>
<p>Instance ids are extracted from the SVAL2 file by matching regex</p>
<pre>
                /&lt;instance id\s*=\s*&quot;IID&quot;/&gt;/</pre>
<p>where 'IID' is an instance id of the &lt;context&gt; that follows this &lt;instance&gt; 
tag.</p>
<p>
</p>
<h3><a name="rclass_rclassfile">--rclass RCLASSFILE</a></h3>
<p>Creates RCLASSFILE for Cluto's --rclassfile option. Each line in the
RCLASSFILE shows the true sense id of the instance whose context vector 
appears on the corresponding line on STDOUT.</p>
<p>Sense ids are extracted from the SVAL2 file by matching regex</p>
<pre>
                /sense\s*id\s*=\s*&quot;SID&quot;\/&gt;/</pre>
<p>where SID shows the true sense tag of the instance whose IID is recently
extracted by matching</p>
<pre>
                /&lt;instance id\s*=\s*&quot;IID&quot;/&gt;/</pre>
<p>
</p>
<h3><a name="showkey">--showkey</a></h3>
<p>Displays the name of the system generated KEY file on the first line of STDOUT.
KEY file preserves the instance ids and sense tags of the instances in the
given SVAL2 file. This information will be automatically used by some of the
clustering and evaluation programs in SenseClusters that operate on purely
numeric instance formats. The option should be selected if the user is planning
to run SenseClusters' clustering code.</p>
<p>
</p>
<h2><a name="other_options__">Other Options :</a></h2>
<p>
</p>
<h3><a name="format_form">--format FORM</a></h3>
<p>If --dense is ON, input WORD VECtors need to be formatted i.e. should be
represented using same numeric format and occupy same number of digit spaces.
If wordvec.pl was run using its --format option, then the value of --format
to order2vec.pl should be same as that specified in wordvec.pl's --format
option.</p>
<p>Format should be represented as</p>
<p>iN   -&gt; integer format where each entry occupies total N bytes/digits</p>
<p>fN.M -&gt; floating point format where each entry occupies total N bytes/digits
        of which last M digits show the fractional part</p>
<p>When --binary is ON, default format is i2 that assumes 2 digit space for each
entry. When --binary is OFF, default format is f16.10 that assumes each
entry is fractional occupying total 16 digit equivalent spaces of which last 10
digits show the fractional part.</p>
<p>Output context vectors (sparse or dense) will be represented using the 
specified format value or default f16.10.</p>
<p>
</p>
<h3><a name="help">--help</a></h3>
<p>Displays this message.</p>
<p>
</p>
<h3><a name="version">--version</a></h3>
<p>Displays the version information.</p>
<p>
</p>
<hr />
<h1><a name="output">OUTPUT</a></h1>
<p>Output shows a single context vector on each line. 
Context vectors represent instances in the same order as they appear in the 
given SVAL2 file i.e. each ith vector on STDOUT shows a context vector of the
ith instance in the SVAL2 file.</p>
<p>Each context vector is an average of the WORD VECtors of the features 
that are found in the context using FEATURE_REGEX.</p>
<p>
</p>
<h2><a name="sample_sparse_output">Sample Sparse Output</a></h2>
<p>Input Sval2 file =&gt; test.sval2</p>
<pre>
 &lt;corpus lang=&quot;english&quot;&gt;
 &lt;lexelt item=&quot;LEXELT&quot;&gt;
 &lt;instance id=&quot;hard-a.sjm-098_3:&quot;&gt;
 &lt;answer instance=&quot;hard-a.sjm-098_3:&quot; senseid=&quot;HARD1&quot;/&gt;
 &lt;context&gt;
 someone has to kill him to defeat him and that s &lt;head&gt;HARD&lt;/head&gt; to do
 &lt;/context&gt;
 &lt;/instance&gt;
 &lt;instance id=&quot;hard-a.w8_038:&quot;&gt;
 &lt;answer instance=&quot;hard-a.w8_038:&quot; senseid=&quot;HARD3&quot;/&gt;
 &lt;context&gt;
 I find it &lt;head&gt;HARD&lt;/head&gt; to believe that you don't believe me
 &lt;/context&gt;
 &lt;/instance&gt;
 &lt;instance id=&quot;hard-a.sjm-255_13:&quot;&gt;
 &lt;answer instance=&quot;hard-a.sjm-255_13:&quot; senseid=&quot;HARD3&quot;/&gt;
 &lt;context&gt;
 when you get bad credit data or are confused with another person your life gets  &lt;head&gt;HARD&lt;/head&gt;
 &lt;/context&gt;
 &lt;/instance&gt;
 &lt;instance id=&quot;hard-a.sjm-231_3:&quot;&gt;
 &lt;answer instance=&quot;hard-a.sjm-231_3:&quot; senseid=&quot;HARD2&quot;/&gt;
 &lt;context&gt;
 Our life is &lt;head&gt;HARDER&lt;/head&gt; now yes but it is better to live hungry and free life
 &lt;/context&gt;
 &lt;/instance&gt;
 &lt;instance id=&quot;hard-a.sjm-096_2:&quot;&gt;
 &lt;answer instance=&quot;hard-a.sjm-096_2:&quot; senseid=&quot;HARD1&quot;/&gt;
 &lt;context&gt;
 Ray who told his colleagues We have to face the &lt;head&gt;HARD&lt;/head&gt; facts of life due to bad credit
 &lt;/context&gt;
 &lt;/instance&gt;
 &lt;/lexelt&gt;
 &lt;/corpus&gt;</pre>
<p>Input FEATURE_REGEX file =&gt; test.regex</p>
<pre>
 /\s(&lt;[^&gt;]*&gt;)*&lt;head&gt;HARD&lt;\/head&gt;(&lt;[^&gt;]*&gt;)*\s/ @name = &lt;head&gt;HARD&lt;/head&gt;
 /\s(&lt;[^&gt;]*&gt;)*to(&lt;[^&gt;]*&gt;)*\s/ @name = to
 /\s(&lt;[^&gt;]*&gt;)*defeat(&lt;[^&gt;]*&gt;)*\s/ @name = defeat
 /\s(&lt;[^&gt;]*&gt;)*believe(&lt;[^&gt;]*&gt;)*\s/ @name = believe
 /\s(&lt;[^&gt;]*&gt;)*credit(&lt;[^&gt;]*&gt;)*\s/ @name = credit
 /\s(&lt;[^&gt;]*&gt;)*life(&lt;[^&gt;]*&gt;)*\s/ @name = life
 /\s(&lt;[^&gt;]*&gt;)*facts(&lt;[^&gt;]*&gt;)*\s/ @name = facts
 /\s(&lt;[^&gt;]*&gt;)*kill(&lt;[^&gt;]*&gt;)*\s/ @name = kill</pre>
<p>Input Saprse Word Vectors =&gt; test.sparse_wordvec</p>
<pre>
 8 10 41
 1 4.977 4 7.813 8 9.114 10 1.431
 1 5.944 2 5.728 3 2.978 5 5.604 7 9.444 9 3.680
 2 3.984 3 8.306 4 6.632 5 4.514 7 1.785 9 7.609
 2 9.147 4 3.086 5 0.325 9 1.456
 1 0.741 4 3.450 6 2.363
 1 9.549 2 3.921 3 8.131 4 4.301 5 9.059 6 8.607 10 1.138
 2 8.203 4 7.297 5 1.095 7 4.362 8 2.963 10 7.264
 2 4.296 4 9.802 7 9.268 9 8.856 10 9.723</pre>
<p>Command =&gt;</p>
<pre>
 order2vec.pl --format f9.4 test.sval2 test.sparse_wordvec test.regex</pre>
<p>Output =&gt;</p>
<pre>
 5 10 45
 1   3.8015 2   4.2440 3   2.8733 4   4.0412 5   3.5543 7   6.5642 8   1.5190 9   4.5842 10   1.8590
 1   2.7302 2   6.0055 3   0.7445 4   3.4962 5   1.5635 7   2.3610 8   2.2785 9   1.6480 10   0.3578
 1   5.0890 2   1.3070 3   2.7103 4   5.1880 5   3.0197 6   3.6567 8   3.0380 10   0.8563
 1   8.3473 2   4.5233 3   6.4133 4   2.8673 5   7.9073 6   5.7380 7   3.1480 9   1.2267 10   0.7587
 1   4.5258 2   3.9300 3   2.3478 4   3.8102 5   3.5603 6   1.8283 7   3.8750 8   2.0128 9   1.2267 10   1.6388</pre>
<p>Explanation =&gt;</p>
<p>First instance &lt;hard-a.sjm-098_3:&gt; contains features</p>
<pre>
 '&lt;head&gt;HARD&lt;/head&gt;' once,
 'to' thrice,
 'defeat' once,
 'kill' once.</pre>
<p>Hence, the context vector of instance &lt;hard-a.sjm-098_3:&gt; shown on Line 2
on STDOUT is an average of sparse word vectors -&gt;</p>
<pre>
 [1 4.977 4 7.813 8 9.114 10 1.431]
 3 * [1 5.944 2 5.728 3 2.978 5 5.604 7 9.444 9 3.680]
 [2 3.984 3 8.306 4 6.632 5 4.514 7 1.785 9 7.609]
 [2 4.296 4 9.802 7 9.268 9 8.856 10 9.723]</pre>
<p>OR</p>
<pre>
 [1 4.977 4 7.813 8 9.114 10 1.431]
 [1 17.832 2 17.184 3 8.934 5 16.812 7 28.332 9 11.04]
 [2 3.984 3 8.306 4 6.632 5 4.514 7 1.785 9 7.609]
 [2 4.296 4 9.802 7 9.268 9 8.856 10 9.723]</pre>
<p>The Sum of above vectors is a sparse vector =&gt;</p>
<pre>
 [1 22.809 2 25.464 3 17.24 4 24.247 5 21.326 7 39.385 8 9.114 9 27.505 10 11.154]</pre>
<p>And the average is =&gt;</p>
<pre>
 [1 3.8015 2 4.2440 3 2.8733 4 4.0412 5 3.5543 7 6.5642 8 1.5190 9 4.5842 10 1.8590]</pre>
<p>Similarly, all context vectors are computed by averaging the word vectors of
features that match in the context.</p>
<p>
</p>
<h2><a name="sample_dense_output">Sample Dense Output</a></h2>
<p>In the above example, if WORDVEC is dense =&gt; test.dense_wordvec</p>
<pre>
   8 10
   4.9770   0.0000   0.0000   7.8130   0.0000   0.0000   0.0000   9.1140   0.0000   1.4310
   5.9440   5.7280   2.9780   0.0000   5.6040   0.0000   9.4440   0.0000   3.6800   0.0000
   0.0000   3.9840   8.3060   6.6320   4.5140   0.0000   1.7850   0.0000   7.6090   0.0000
   0.0000   9.1470   0.0000   3.0860   0.3250   0.0000   0.0000   0.0000   1.4560   0.0000
   0.7410   0.0000   0.0000   3.4500   0.0000   2.3630   0.0000   0.0000   0.0000   0.0000
   9.5490   3.9210   8.1310   4.3010   9.0590   8.6070   0.0000   0.0000   0.0000   1.1380
   0.0000   8.2030   0.0000   7.2970   1.0950   0.0000   4.3620   2.9630   0.0000   7.2640
   0.0000   4.2960   0.0000   9.8020   0.0000   0.0000   9.2680   0.0000   8.8560   9.7230</pre>
<p>Command =&gt;</p>
<pre>
 order2vec.pl --format f9.4 --dense test.sval2 test.dense_wordvec test.feat</pre>
<p>Output =&gt;</p>
<pre>
   5 10
   3.8015   4.2440   2.8733   4.0412   3.5543   0.0000   6.5642   1.5190   4.5842   1.8590
   2.7302   6.0055   0.7445   3.4962   1.5635   0.0000   2.3610   2.2785   1.6480   0.3578
   5.0890   1.3070   2.7103   5.1880   3.0197   3.6567   0.0000   3.0380   0.0000   0.8563
   8.3473   4.5233   6.4133   2.8673   7.9073   5.7380   3.1480   0.0000   1.2267   0.7587
   4.5258   3.9300   2.3478   3.8102   3.5603   1.8283   3.8750   2.0128   1.2267   1.6388</pre>
<p>Shows same context vectors as shown in Sample Sparse Output section only 
with --dense ON.</p>
<p>Note that, if --dense is ON, --format has to be used and must specify
the format of dense word vectors.</p>
<p>
</p>
<hr />
<h1><a name="system_requirements">SYSTEM REQUIREMENTS</a></h1>
<p>PDL - <a href="http://search.cpan.org/dist/PDL/">http://search.cpan.org/dist/PDL/</a></p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Ted Pedersen, University of Minnesota, Duluth</p>
<p>Amruta Purandare, University of Minnesota, Duluth</p>
<p>Mahesh Joshi, University of Minnesota, Duluth</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (c) 2002-2006,</p>
<pre>
 Ted Pedersen, University of Minnesota, Duluth
 tpederse@umn.edu</pre>
<pre>
 Amruta Purandare, University of Pittsburgh
 amruta@cs.pitt.edu</pre>
<pre>
 Mahesh Joshi, University of Minnesota, Duluth
 joshi031@d.umn.edu</pre>
<p>This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your option) any later
version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with
this program; if not, write to</p>
<pre>
 The Free Software Foundation, Inc.,
 59 Temple Place - Suite 330,
 Boston, MA  02111-1307, USA.</pre>

</body>

</html>
